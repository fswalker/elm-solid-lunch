<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>Profile Viewer</title>
    <script src="scripts/main.js"></script>
    <script src="scripts/solid-auth-client.bundle.js"></script>
</head>

<body>
    <h1>Profile viewer</h1>
    <div id="elm"></div>
    <script>
        const app = Elm.Main.init({
            node: document.getElementById('elm')
        });
        solid.auth.trackSession(session => {
            console.log('solid::trackSession', session);
            app.ports.trackSession.send(session && session.webId);
        });
        app.ports.authRequest.subscribe(() => {
            console.log('solid::popupLogin');
            const popupUri = 'popup.html';
            solid.auth.popupLogin({ popupUri });
        });
        app.ports.logout.subscribe(() => {
            console.log('solid::logout');
            solid.auth.logout();
        });
    </script>
</body>

</html>